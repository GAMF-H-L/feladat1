<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>CRUD Táblázat</title>
    <style>
    </style>
</head>
<body>
	<h2>HTML5 funkciók</h2>
	<p>Az alábbi listában néhány példa kerül bemutatásra!</p>

	<h4>Web Storage</h4>
	<ul>
		<li>adatokat tárol egy munkamenetben</li>
		<li>amint a felhasználó bezárja az ablakot, a tartalma elvész</li>
	</ul>
	<p>Ez a funkció a CRUD táblázat menüpontban kipróbáható. Amennyiben új adatot veszünk fel lépkedhetünk az aloldalak között anélkül, hogy elveszne. A weboldal bezárása után viszont törlődik. Ez a sessionStorage.</p>

	<h4>Web Workers</h4>
	<p>Ez a funkció az aside részen a kattintások számát mutatja a weboldalon.</p>

	<h4>Server-Sent Events</h4>
	<p>Itt kerül bemutatásra a működése:</p>
	<iframe style="border: 1px solid #000;" src="sse_output.html" width="400" height="100"></iframe>

	<script>
		if(typeof(EventSource) !== "undefined") {
		  var source = new EventSource("sse-inc.php");
		  source.onmessage = function(event) {
			document.getElementById("sseresult").innerHTML += event.data + "<br>";
		  };
		} else {
		  document.getElementById("sseresult").innerHTML = "Sorry, your browser does not support server-sent events...";
		}
	</script>

	<h4>Geolocation API</h4>
	<p>Itt kerül bemutatásra a működése,hogy a helyi koordináta lekérdezhető egy szélességi és egy hosszúsági számot kapunk:</p>

	<button onclick="getLocation()">Lekérdezés</button>

	<p id="demo"></p>

	<script>
	const x = document.getElementById("demo");

	function getLocation() {
	if (navigator.geolocation) {
		navigator.geolocation.getCurrentPosition(showPosition);
	} else { 
		x.innerHTML = "Geolocation is not supported by this browser.";
	}
	}

	function showPosition(position) {
	x.innerHTML = "Latitude (szélesség): " + position.coords.latitude + 
	"<br>Longitude (hosszúság): " + position.coords.longitude;
	}
	</script>

	<h4>Drag and drop API</h4>

	<div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
	<br>
	<img id="drag1" src="imgs/nje-logo.png" draggable="true" ondragstart="drag(event)" width="336" height="69">

	<script>
		function allowDrop(ev) {
		  ev.preventDefault();
		}
		
		function drag(ev) {
		  ev.dataTransfer.setData("text", ev.target.id);
		  
		}
		
		function drop(ev) {
		  ev.preventDefault();
		  var data = ev.dataTransfer.getData("text");
		  ev.target.appendChild(document.getElementById(data));
		  alert("Sikerült a dobás, szép munka!");
		}
		</script>

	<h4>Canvas</h4>
	Játékok alapjára is remek szolgálatot tesz:<br>
	<img src="imgs/doom.png" id="screenshot" />
	<canvas id="canvas" width="640" height="400"></canvas>
	
	<script>
		function restart() {
		var d_canvas = document.getElementById('canvas');
		var context = d_canvas.getContext('2d');
		var screenshot = document.getElementById('screenshot');
		context.drawImage(screenshot, 0, 0);
		context.fillStyle = "#990000";

		var rndval = 1;
		var filler = function() {
			for (var pixels = 0; pixels < 64; pixels++) {
			var y = (rndval & 0x000FF) - 1;
			var x = (rndval & 0x1FF00) >> 8;

			rndval = (rndval * 22695477 + 1) % (1 << 17);

			if (x < 320 && y < 200)
				context.fillRect(x * 2, y * 2, 2, 2);
			if (rndval == 1)
				return setTimeout(restart, 500);
			}
			setTimeout(filler, 1);
		};
		filler();
		}

		$(document).ready(restart);
</script>

</body>
</html>
